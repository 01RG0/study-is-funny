<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Navigation</title>
    <style>
        /* Style for the main iframe video */
        .video-container {
            max-width: 800px;
            width: 100%;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Control button styling */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }

        .controls button {
            padding: 8px 16px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #008080;
            color: #FFFFE0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .controls button:hover {
            background-color: #006666;
        }

        .controls button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="video-container">
        <iframe id="videoFrame" src="https://iframe.mediadelivery.net/embed/132580/3834cc64-c1c2-4f1d-bb8c-e792b77c4fd6?token=64bd3c210bf3ae2513b5f9687eb851c85a6c73c54cf6cd551eb56ecfdf404a96&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true" frameborder="0" allow="autoplay; fullscreen"></iframe>
    </div>
    <div class="controls">
        <button id="prevButton" onclick="prevVideo()" disabled>Previous Question</button>
        <button id="nextButton" onclick="nextVideo()">Next Question</button>
        <button onclick="toggleFullscreen()">Fullscreen</button>
    </div>
    <p id="accessMessage"></p> <!-- Display access messages here -->

    <script>
        // Array of video links
        const videoLinks = [
        "https://iframe.mediadelivery.net/embed/132580/3834cc64-c1c2-4f1d-bb8c-e792b77c4fd6?token=64bd3c210bf3ae2513b5f9687eb851c85a6c73c54cf6cd551eb56ecfdf404a96&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/815be2db-e769-47d0-b85b-a20c5a2133a4?token=129f639418cb91d125039a1230093254b918dfae8bd01c36f06c5dc49ba85275&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/28959108-02b6-4bb0-baf4-b423274e7fa2?token=cf3e4e4a1c7e278eb57552d022ccfab3fd3004c8144bf87369aef58445260e6c&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/63eacca4-0369-435a-9d93-2856058568da?token=f24a0a7c3fd20590106ae454b69f7a808075708db016f40bac2250d05762947e&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/fef79f1c-e989-4c25-a6a8-1df30026adbe?token=2ae15cabae1fc403124ea2a214c93730b671fa89af37455899f33fa70360c8e1&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/b035b899-faec-4722-b43f-8b4b03e049ab?token=f54d65ffe257e4cca3cdf11c7ea319ffd3c765b2ec281fb2786765c49858a11b&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/500c7ea5-8e38-4c68-a188-6abf467ac261?token=00a3427d3649ccaf82cfc9f2c911b10fee4a3f40fb10559add6cbd81e06f0ba3&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/37d03443-ae0c-4094-b82a-307a5ff27b22?token=8aac154a776d7ff46d935d5ee0b8195652f8ec306f2b2c0a8b7940a340bb3a4e&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/9675f446-eb6b-41f8-aa16-38e65c774ac2?token=eea84f9bae2bf3d64c76795ca06a611f94be3fa84012eb63644c4a4246599b4a&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/382b7c0f-2524-4e9f-a617-94b082fc98b2?token=656fb035d539dff945367c932a9bdcf0467d64f716a1d6929797995e6f97e418&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/9b8b142b-c80f-4037-83cd-fc097663f75a?token=8c600f401cc2da23619011a3b265a50114776e903d977fdb4dbe4ed8801171a0&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        "https://iframe.mediadelivery.net/embed/132580/4dffe11e-b26b-4d1f-9fdd-13bfe7a6d240?token=6112c1f2e956ffa7a8faead1a0d03640037034ca0207e942c446895660fbcab7&expires=1765758573&autoplay=true&loop=false&muted=false&preload=true&responsive=true",
        ];

        let currentVideoIndex = 0;

        // Load a video by index
        function loadVideo(index) {
            const iframe = document.getElementById("videoFrame");
            iframe.src = videoLinks[index];
            updateButtons();
        }

        // Move to the next video
        function nextVideo() {
            if (currentVideoIndex < videoLinks.length - 1) {
                currentVideoIndex++;
                loadVideo(currentVideoIndex);
            }
        }

        // Move to the previous video
        function prevVideo() {
            if (currentVideoIndex > 0) {
                currentVideoIndex--;
                loadVideo(currentVideoIndex);
            }
        }

        // Update button states
        function updateButtons() {
            document.getElementById("prevButton").disabled = currentVideoIndex === 0;
            document.getElementById("nextButton").disabled = currentVideoIndex === videoLinks.length - 1;
        }

        // Toggle fullscreen
        function toggleFullscreen() {
            const videoContainer = document.querySelector('.video-container');
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                videoContainer.requestFullscreen();
            }
        }





        const sheetUrl = 'https://script.google.com/macros/s/AKfycbws23er40skaTk9VawhjnyRXM-ekvoGfop18s1q-yB3fFADCIDOjp223iz0xe-zSczDYA/exec';
    
        function getSession() {
            const phone = localStorage.getItem('userPhone');
            if (!phone) {
                location.href = "studyisfunny.com/login";
                return;
            } 
            fetch(`${sheetUrl}?code=${phone}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        location.href = "studyisfunny.com/login";
                    }
                })
                .catch(err => {
                    console.error('Fetch error:', err);
                });
        }
        
        window.onload = getSession;    

    </script>
</body>
</html>
